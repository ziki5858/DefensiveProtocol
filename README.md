# MessageU â€“ Secure Messaging System (Client & Server)

This project implements a simplified encrypted messaging protocol, inspired by secure communication apps. The system includes:

- A C++ client
- A Python server
- Secure communication using AES and RSA cryptography
- Structured protocol with fixed-size headers and message types

---

## ğŸ¯ Project Goals

- Demonstrate secure peer-to-peer messaging using public key and symmetric key encryption
- Implement a custom client-server protocol with support for:
  - User registration
  - Public key retrieval
  - Encrypted text messaging
  - Symmetric key exchange
  - Fetching waiting messages

---

## ğŸ“ Project Structure

```
defencivy-project/
â”‚
â”œâ”€â”€ client/                   # C++ client implementation
â”‚   â”œâ”€â”€ Client.cpp            # Main client logic
â”‚   â”œâ”€â”€ Connection.cpp        # TCP socket abstraction (Windows)
â”‚   â”œâ”€â”€ CryptoManager.cpp     # RSA and AES encryption logic
â”‚   â”œâ”€â”€ ProtocolBuilder.cpp   # Builds protocol-compliant requests
â”‚   â”œâ”€â”€ ProtocolParser.cpp    # Parses responses from server
â”‚   â”œâ”€â”€ main.cpp              # Entry point
â”‚   â”œâ”€â”€ me.info               # Client identity file (autogenerated)
â”‚   â””â”€â”€ server.info           # Contains IP and port of server
â”‚
â”œâ”€â”€ server/                   # Python server implementation
â”‚   â”œâ”€â”€ server.py             # Main server listener
â”‚   â”œâ”€â”€ protocol.py           # Handles header parsing/response building
â”‚   â”œâ”€â”€ registry.py           # Manages registered clients and messages
â”‚   â””â”€â”€ handlers.py           # Per-message-type handlers
```

---

## ğŸš€ Running the Project

### ğŸ§© Prerequisites

- Windows (client uses WinSock2)
- Python 3.x
- `cryptopp` (linked statically into the client)
- CMake + MinGW (or CLion)
- `server.info` file containing `127.0.0.1:1234`

---

### ğŸ–¥ï¸ Compile the Client (C++)

1. Open in CLion or run:
   ```bash
   mkdir build
   cd build
   cmake ..
   cmake --build .
   ```

2. Or manually compile with g++:
   ```bash
   g++ -std=c++17 *.cpp -lcryptopp -lws2_32 -o client.exe
   ```

---

### ğŸ Run the Server (Python)

From the `server/` directory:

```bash
python server.py
```

Server will start listening on port `1234`.

---

## ğŸ§ª Basic Usage

From the client:

```text
110) Register
120) List clients
130) Get public key
140) Fetch messages
150) Send text
151) Request sym key
152) Send sym key
0) Exit
```

Typical interaction:

1. Register users (once per user)
2. List clients (120)
3. Get public key of recipient (130)
4. Send/Request symmetric key (151, 152)
5. Send text message (150)
6. Recipient runs (140) to fetch messages

---

## ğŸ§  Notes & Design Decisions

- **RSA key pair** is generated locally per client on registration.
- **me.info** stores the client ID and private key. To test multiple users on one machine, run the client from different folders or adjust the code to support per-user files (`me_ishay.info`, etc.).
- The client keeps in-memory maps of:
  - Symmetric keys per peer (`symKeyStore`)
  - Public keys per peer (`peerPubKeys`)
  - Registered usernames (`clientsMap`)

---

## âœ… Features Implemented (per course requirements)

- âœ”ï¸ Structured binary protocol with headers
- âœ”ï¸ Unique user registration with client ID
- âœ”ï¸ Public key exchange
- âœ”ï¸ RSA-encrypted symmetric key exchange
- âœ”ï¸ AES-encrypted messages with IV
- âœ”ï¸ Message storage and delivery via server
- âœ”ï¸ Clear debug output for testing

---

## ğŸ› ï¸ Potential Improvements

- Support for deleting/refreshing `me.info` easily
- GUI client
- File transfer support
- Persistent database (instead of in-memory registry)
- Encrypted `me.info`

---

## ğŸ“š Author

- Student: **Ishay Abakiev**
- Final Project â€“ Open University, Maman 15

---
âš ï¸ License: All Rights Reserved  
This project is public for viewing only.  
Any copying, distribution, or usage without explicit permission is strictly forbidden.
